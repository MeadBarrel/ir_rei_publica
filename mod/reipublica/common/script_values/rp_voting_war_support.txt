rp_voting_wardec_personal = {
	value = var:senate_support_base_wardec

	#add = var:rp_character_war_support_base

	add = {  # From martial
		value = martial
		subtract = 5
	}

	# From traits

	if = {  # Is a conqueror
		limit = { has_trait = conqueror }
		add = 5
	}

	if = {  # Is a coward
		limit = { has_trait = coward }
		add = -10
	}

	if = {  # Is cautious
		limit = { has_trait = cautious } 
		add = -3
	}

	if = {  # Is reckless
		limit = { has_trait = reckless }
		add = 3
	}

	if = {  # Ambitious with high martial
		limit = { 
			has_trait = ambitious 
			martial > 7
		}
		add = 5
	}

	if = {  # Is good natured
		limit = { has_trait = good_natured }
		add = -3
	}

	if = {  # Is abrasive
		limit = { has_trait = abrasive }
		add = 3
	}

	if = {  # Zealous/pious and they have wrong religion
		limit = {
			or = {
				has_trait = zealous
				has_trait = pious
			}
			not = { has_same_religion_as = scope:target.current_ruler }
		}
		add = 5
	}

	if = {
		limit = { # Has no holdings
			num_holdings_owned = 0 
			employer = { possible_holdings <= total_holdings }
		}
		add = 5
	}

	if = {  # Still have space for more holdings
		limit = { 
			num_holdings_owned < max_holdings_owned 
			employer = { possible_holdings <= total_holdings }
		}
		add = 3
	}

	if = {  # We have enough holdings
		limit = {
			num_holdings_owned = max_holdings_owned
		}
		add = -3
	}

	if = {  # Has loyal friend in their country
		limit = {
			any_friend = {
				employer = scope:target
				loyalty >= 70
			}
		}
		add = -5
	}

	if = {  # Is friend of their ruler
		limit = { is_friend = scope:target.current_ruler }
		add = -10
	}

	if = {  # Is general
		limit = { is_general = yes }
		add = 3
	}

	add = num_loyal_cohorts  # From loyal cohorts

	if = {  # Has loyal rival in their country
		limit = {
			any_rival = {
				employer = scope:target
				loyalty > 70
			}
		}
		add = 5
	}

	if = {  # Their ruler is our rival
		limit = {
			is_rival = scope:target.current_ruler
		}
		add = 20
	}

#	if = {  # Our holdings in danger of being occupied
#		limit = {
#			any_holdings = {
#				province = {
#					OR = {
#						any_neighbor_province = {
#							owner = scope:target
#						}
#						NOT = {
#							OR = {
#								fort_level > 0
#								any_neighbor_province ={
#									owner = employer
#									fort_level > 0 
#								}
#							}
#						}
#					}
#				}
#			}
#		}
#		add = -5
#	}
}

rp_voting_wardec_ruler = {
	value = rp_voting_wardec_personal
	add = rp_voting_support_ruler
}


rp_voting_wardec_military_party_ruler = {
	value = 0
	every_in_list = { variable = military_party_members limit={ can_vote=yes rp_voting_wardec_ruler>0 } add=1 }
	every_in_list = { variable = military_party_members limit={ can_vote=yes rp_voting_wardec_ruler<0 } add=-1 }
}



rp_voting_wardec_civic_party_ruler = {
	value = 0
	every_in_list = { variable = civic_party_members limit={ can_vote=yes rp_voting_wardec_ruler>0 } add=1 }
	every_in_list = { variable = civic_party_members limit={ can_vote=yes rp_voting_wardec_ruler<0 } add=-1 }
}



rp_voting_wardec_religious_party_ruler = {
	value = 0
	every_in_list = { variable = religious_party_members limit={ can_vote=yes rp_voting_wardec_ruler>0 } add=1 }
	every_in_list = { variable = religious_party_members limit={ can_vote=yes rp_voting_wardec_ruler<0 } add=-1 }
}


rp_voting_wardec_mercantile_party_ruler = {
	value = 0
	every_in_list = { variable = mercantile_party_members limit={ can_vote=yes rp_voting_wardec_ruler>0 } add=1 }
	every_in_list = { variable = mercantile_party_members limit={ can_vote=yes rp_voting_wardec_ruler<0 } add=-1 }
}


rp_voting_wardec_populist_party_ruler = {
	value = 0
	every_in_list = { variable = populist_party_members limit={ can_vote=yes rp_voting_wardec_ruler>0 } add=1 }
	every_in_list = { variable = populist_party_members limit={ can_vote=yes rp_voting_wardec_ruler<0 } add=-1 }
}
